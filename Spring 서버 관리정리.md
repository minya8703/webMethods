

# Spring 서버 관리정리

## 쓰레드 관리
- 쓰레드는 메모리와 관련 있으므로, 많이 사용할 수록 메모리를 많이 점유하게 된다.
- 메모리를 위해서 쓰레드를 적게 설정 할 경우 서버에서는 많은 요청을 처리 하지 못하고 대기할 수 밖에 없다.
- 개발자용 PC에서는 이 값이 높을 경우 기동 시간이 많이 소요 되므로 최소한으로 설정
- 운영중의 서버에서는 최소 및 최대 값을 동일하게 하는 것이 좋다. 사용자수가 갑자기 증가하면 DB connection pool의 개수도 증가하여야 하기에 증가시 대기 시간이 발생할 확률이 크기때문.

### WAS(Web Application Server)에서 
- 쓰레드와 DB connection pool 두 설정값의 기본 개수 10~20정도로 기본 값으로 기본값으로 서비스를 오픈시 서버가 원하는 요청량을 처리하지 못 할 가능성이 높다.
- DB connection pool 개수를 40~50개로 지정하면, 스레드는 10개 정도 더 지정한다. 이렇게 지정하는 이유는 스레드 개수가 DB connection pool의 개수보다 적으면 적은 수만큼의 연결은 필요없기 때문이다.
- 예를 들어 쓰레드를 40개로 지정하고 DB connection pool 개수를 50개로 지정하면, 적어도 10의 연결은 전혀 사용하지 않게 된다. 쓰레드는 입구이며 DB connection pool은 출구라고 보면된다.

- 그럼 스레드의 개수가 DB연결 개수보다 많아야하는 이유는? 모든 화면에서의 동작이 DB에 접속하는 것이아니라서 관리자 콘솔을 사용하여 서버에 접속할 수도 있기에 그만큼의 여유분을 갖도록 지정하는 것이 보통이다.

- 적합한 DB connection pool과 스레드 개수 웹서버의 세팅 값도 그렇지만, 이 수치도 서버와 애플리 케이션 상황에 따라 다르며, 완벽한 값은 없기에 서비스의 서버 상황에 맞게 지정하여 성능 테스트를 통하여 가장 적절한 값을 구하는 것이다.



https://everenew.tistory.com/257



# 사용중 포트 확인용
``` netstat -ano | find "LISTENING" | find "포트번호" ```
``` taskkill /F /PID 포트번호 ```
